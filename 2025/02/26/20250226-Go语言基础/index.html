<!DOCTYPE html>
<html lang="zh-Hans">
    
    <head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" name="viewport" />
    <meta name="description" content="Go å¿«é€Ÿå…¥é—¨ï¼ˆäº”ï¼‰" />
    <meta name="hexo-theme-A4" content="v1.9.7" />
    <link rel="alternate icon" type="image/webp" href="/img/laptop-code.svg">
    <title>Casey</title>

    
        
<link rel="stylesheet" href="/css/highlight/style1.css">

        
<link rel="stylesheet" href="/css/reset.css">

        
<link rel="stylesheet" href="/css/markdown.css">

        
<link rel="stylesheet" href="/css/fonts.css">
 
         <!--æ³¨æ„ï¼šé¦–é¡µæ—¢ä¸æ˜¯postä¹Ÿä¸æ˜¯page-->
        
        
        
<link rel="stylesheet" href="/css/ui.css">
 
        
<link rel="stylesheet" href="/css/style.css">


        
            <!--è¿”å›é¡¶éƒ¨css-->
            
<link rel="stylesheet" href="/css/returnToTop.css">

            
<link rel="stylesheet" href="/css/unicons.css">

        
        
            <!--ç›®å½•-->
            
<link rel="stylesheet" href="/css/toc.css">

        
    

    
        
<link rel="stylesheet" href="/css/returnToLastPage.css">

    
    
   
<link rel="stylesheet" href="/css/lightgallery-bundle.min.css">


<meta name="generator" content="Hexo 7.3.0"><style>mjx-container[jax="SVG"] {
  direction: ltr;
}

mjx-container[jax="SVG"] > svg {
  overflow: visible;
}

mjx-container[jax="SVG"][display="true"] {
  display: block;
  text-align: center;
  margin: 1em 0;
}

mjx-container[jax="SVG"][justify="left"] {
  text-align: left;
}

mjx-container[jax="SVG"][justify="right"] {
  text-align: right;
}

g[data-mml-node="merror"] > g {
  fill: red;
  stroke: red;
}

g[data-mml-node="merror"] > rect[data-background] {
  fill: yellow;
  stroke: none;
}

g[data-mml-node="mtable"] > line[data-line] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > rect[data-frame] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > .mjx-dashed {
  stroke-dasharray: 140;
}

g[data-mml-node="mtable"] > .mjx-dotted {
  stroke-linecap: round;
  stroke-dasharray: 0,140;
}

g[data-mml-node="mtable"] > svg {
  overflow: visible;
}

[jax="SVG"] mjx-tool {
  display: inline-block;
  position: relative;
  width: 0;
  height: 0;
}

[jax="SVG"] mjx-tool > mjx-tip {
  position: absolute;
  top: 0;
  left: 0;
}

mjx-tool > mjx-tip {
  display: inline-block;
  padding: .2em;
  border: 1px solid #888;
  font-size: 70%;
  background-color: #F8F8F8;
  color: black;
  box-shadow: 2px 2px 5px #AAAAAA;
}

g[data-mml-node="maction"][data-toggle] {
  cursor: pointer;
}

mjx-status {
  display: block;
  position: fixed;
  left: 1em;
  bottom: 1em;
  min-width: 25%;
  padding: .2em .4em;
  border: 1px solid #888;
  font-size: 90%;
  background-color: #F8F8F8;
  color: black;
}

foreignObject[data-mjx-xml] {
  font-family: initial;
  line-height: normal;
  overflow: visible;
}

.MathJax path {
  stroke-width: 3;
}

mjx-container[display="true"] {
  overflow: auto hidden;
}

mjx-container[display="true"] + br {
  display: none;
}
</style></head>
    
    

    
    



    

    
    

    
    
    
    <body>
        <script src="/js/darkmode-js.min.js"></script>
        
        <script>
            const options = {
                bottom: '40px', // default: '32px'
                right: 'unset', // default: '32px'
                left: '42px', // default: 'unset'
                time: '0.3s', // default: '0.3s'
                mixColor: '#fff', // default: '#fff'
                backgroundColor: ' #e4e4e4 ',  // default: '#fff'
                buttonColorDark: '#100f2c',  // default: '#100f2c'
                buttonColorLight: '#fff', // default: '#fff'
                saveInCookies: true, // default: true,
                label: 'ğŸŒ“', // default: ''
                autoMatchOsTheme: true // default: true
            }
            const darkmode = new Darkmode(options);
            darkmode.showWidget();
        </script>
        
        
            <div class="left-toc-container">
                <nav id="toc" class="bs-docs-sidebar"></nav>
            </div>
        
        <div class="paper">
            
            
            
            
                <div class="shadow-drop-2-bottom paper-main">
                    


<div class="header">
    <div class="header-container">
        <style>
            .header-img {
                width: 56px;
                height: auto;
                object-fit: cover; /* ä¿æŒå›¾ç‰‡æ¯”ä¾‹ */
                transition: transform 0.3s ease-in-out; 
                border-radius: 0; 
            }
            
        </style>
        <img 
            alt="^-^" 
            cache-control="max-age=86400" 
            class="header-img" 
            src="/img/laptop-code.svg" 
        />
        <div class="header-content">
            <a class="logo" href="/">Casey</a> 
            <span class="description">ä¸€ä¸ªåçŸ¥åè§‰çš„è¿½èµ¶è€…</span> 
        </div>
    </div>
    
   
    <ul class="nav">
        
            
                <li><a href="/">ğŸŒé¦–é¡µ</a></li>
            
        
            
                <li><a href="/list/">ğŸ“–æ–‡ç« </a></li>
            
        
            
                <li><a href="/tags/">ğŸ“Œæ ‡ç­¾</a></li>
            
        
            
                <li><a href="/categories/">ğŸ”–åˆ†ç±»</a></li>
            
        
            
                <li><a href="/about/">ğŸ’¬å…³äº</a></li>
            
        
    </ul>
</div> 
        
                    
                    

                    
                    
                    
                    <!--è¯´æ˜æ˜¯æ–‡ç« posté¡µé¢-->
                    
                        <div class="post-main">
    

    
        
            
                <div class="post-main-title" style="text-align: center;">
                    Go å¿«é€Ÿå…¥é—¨ï¼ˆäº”ï¼‰
                </div>
            
        
      
    

    

        
            <div class="post-head-meta-center">
        
                
                    <span>æœ€è¿‘æ›´æ–°ï¼š2025-02-26</span> 
                
                
                    
                        &nbsp; | &nbsp;
                    
                     <span>å­—æ•°æ€»è®¡ï¼š1.3k</span>
                
                
                    
                        &nbsp; | &nbsp;
                    
                    <span>é˜…è¯»ä¼°æ—¶ï¼š5åˆ†é’Ÿ</span>
                
                
                    
                        &nbsp; | &nbsp;
                    
                    <span id="busuanzi_container_page_pv">
                        é˜…è¯»é‡ï¼š<span id="busuanzi_value_page_pv"></span>æ¬¡
                    </span>
                
            </div>
    

    <div class="post-md">
        
            
        
        <div class=".article-gallery"><p>æœ¬æ–‡çš„å†…å®¹å»ºç«‹åœ¨å·²å¯¹ C å’Œ C++ ç†Ÿç»ƒæŒæ¡çš„åŸºç¡€ä¹‹ä¸Šï¼Œä¸»è¦ç»™å‡º Go ä¸ C å’Œ C++ ä¹‹é—´çš„ä¸åŒä¹‹å¤„ã€‚</p>
<h2 id="å¹¶å‘"><a href="#å¹¶å‘" class="headerlink" title="å¹¶å‘"></a>å¹¶å‘</h2><h3 id="Goroutine"><a href="#Goroutine" class="headerlink" title="Goroutine"></a>Goroutine</h3><p>Go ä¸­ä»¥ Goroutine ä¸ºå•ä½å¹¶å‘ï¼Œç±»ä¼¼äºçº¿ç¨‹ã€‚Goroutine ä½¿ç”¨ <code>go</code> å¯åŠ¨ï¼Œç”± Go è‡ªåŠ¨è°ƒåº¦ï¼Œä¸”æ˜¯éé˜»å¡çš„ã€‚</p>
<p>ä¸‹é¢æ˜¯å¯åŠ¨ Goroutine çš„ä¸€ä¸ªå®ä¾‹ã€‚</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">greet</span><span class="params">()</span></span> {</span><br><span class="line">  <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">3</span>; i++ {</span><br><span class="line">    fmt.Println(<span class="string">"hello from greet()"</span>)</span><br><span class="line">    time.Sleep(<span class="number">100</span> * time.Millisecond)</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">  <span class="keyword">go</span> greet()</span><br><span class="line">  <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">3</span>; i++ {</span><br><span class="line">    fmt.Println(<span class="string">"hello from main()"</span>)</span><br><span class="line">    time.Sleep(<span class="number">100</span> * time.Millisecond)</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"><span class="comment">/* OUTPUT:</span></span><br><span class="line"><span class="comment">hello from main()</span></span><br><span class="line"><span class="comment">hello from greet()</span></span><br><span class="line"><span class="comment">hello from greet()</span></span><br><span class="line"><span class="comment">hello from main()</span></span><br><span class="line"><span class="comment">hello from main()</span></span><br><span class="line"><span class="comment">hello from greet()</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<p>ç”±äºæ²¡æœ‰ç‰¹æ®Šæ§åˆ¶ï¼Œè¾“å‡ºçš„é¡ºåºæ˜¯ä¸ä¸€å®šçš„ã€‚</p>
<p><code>main()</code> çš„æ‰§è¡Œæœ¬èº«ä¸º main goroutineï¼Œmain goroutine æœ‰ä¸€å®šçš„ç‰¹æ®Šæ€§ï¼Œå…¶ç”± Go è‡ªåŠ¨åˆ›å»ºï¼Œ<code>main()</code> ç»“æŸæ—¶ main goroutine ç»“æŸï¼Œå¹¶ä¸”ä¼šç»“æŸå…¶ä»–çš„ goroutineã€‚å› æ­¤ï¼Œåœ¨æ‰§è¡Œä¸Šé¢çš„ç¨‹åºæ—¶ï¼Œæœ‰æ—¶ä¼šå›  main routine ç»“æŸï¼Œå¯¼è‡´æå‰ç»“æŸ <code>greet()</code> routineï¼Œå‡ºç°ä¸‹é¢è¿™ç§è¾“å‡ºã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hello from main()</span><br><span class="line">hello from greet()</span><br><span class="line">hello from main()</span><br><span class="line">hello from main()</span><br></pre></td></tr></table></figure>

<h3 id="Channel"><a href="#Channel" class="headerlink" title="Channel"></a>Channel</h3><p>é€šé“ <code>chan</code> ç”¨äº goroutine é—´çš„é€šä¿¡ã€‚</p>
<h4 id="åŒæ­¥-Channel"><a href="#åŒæ­¥-Channel" class="headerlink" title="åŒæ­¥ Channel"></a>åŒæ­¥ Channel</h4><p>é€šé“å£°æ˜ä½¿ç”¨ <code>var ch chan int</code>ï¼Œå£°æ˜äº†ä¸€ä¸ªä¼ é€ <code>int</code> å‹çš„é€šé“ <code>ch</code>ã€‚ä½†æ­¤æ—¶çš„é€šé“ä¸º <code>nil</code>ï¼Œéœ€è¦ä½¿ç”¨ <code>make</code> åˆå§‹åŒ–æ‰å¯ä»¥ä½¿ç”¨ï¼Œåˆå§‹åŒ–åå¯ä»¥ä½¿ç”¨ <code>&lt;-</code> æ¥å‘é€šé“ä¼ é€æˆ–æ˜¯æ¥æ”¶æ•°æ®ï¼Œç¤ºä¾‹å¦‚ä¸‹ã€‚</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> tmp <span class="type">int</span></span><br><span class="line">ch := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>) <span class="comment">// åˆ›å»ºä¼ è¾“ int çš„é€šé“</span></span><br><span class="line">ch &lt;- tmp <span class="comment">// å‘é€šé“ä¼ é€æ•°æ®</span></span><br><span class="line">tmp = &lt;-ch <span class="comment">// æ¥æ”¶é€šé“ä¸­çš„æ•°æ®</span></span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨ <code>make(chan int)</code> å£°æ˜çš„é€šé“æ²¡æœ‰ç¼“å†²åŒºï¼Œå…·æœ‰åŒæ­¥çš„ç‰¹ç‚¹ï¼Œå³æ•°æ®å‘é€ç«¯ä¼šç­‰å¾…æ•°æ®å–å‡ºåå†ç»§ç»­æ‰§è¡Œåç»­çš„ä»£ç ï¼Œæ•°æ®çš„æ¥æ”¶ç«¯ä¼šç­‰å¾…æ•°æ®åˆ°è¾¾å†æ‰§è¡Œåç»­çš„ä»£ç ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„ä»£ç ä¼šè§¦å‘ <code>panic</code>ã€‚</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">  x := <span class="number">1</span></span><br><span class="line">  ch := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>)</span><br><span class="line">  ch &lt;- x</span><br><span class="line">  x = &lt;-ch</span><br><span class="line">}</span><br><span class="line"><span class="comment">/* OUTPUT:</span></span><br><span class="line"><span class="comment">fatal error: all goroutines are asleep - deadlock!</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">goroutine 1 [chan send]:</span></span><br><span class="line"><span class="comment">main.main()</span></span><br><span class="line"><span class="comment">        C:/____/____/go/src/TestProject/main.go:6 +0x34</span></span><br><span class="line"><span class="comment">exit status 2</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<p>è¿™æ˜¯å› ä¸ºä»£ç ä¼šåœåœ¨ <code>ch &lt;- x</code> å¤„ç­‰å¾…é€šé“ä¸­çš„ <code>x</code> è¢«å–èµ°ï¼Œè€Œåç»­çš„æ¥æ”¶é€šé“æ•°æ®æ— æ³•æ‰§è¡Œï¼Œç¨‹åºé™·å…¥æ­»é”ã€‚æ­£ç¡®çš„é€šé“ä½¿ç”¨ç¤ºä¾‹å¦‚ä¸‹ã€‚</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">send</span><span class="params">(ch <span class="keyword">chan</span> <span class="type">string</span>)</span></span> {</span><br><span class="line">  ch &lt;- <span class="string">"msg from send()"</span></span><br><span class="line">  <span class="built_in">close</span>(ch)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">recv</span><span class="params">(ch <span class="keyword">chan</span> <span class="type">string</span>)</span></span> {</span><br><span class="line">  s := &lt;-ch</span><br><span class="line">  fmt.Println(<span class="string">"recv() msg from ch:"</span>, s) <span class="comment">// -&gt; recv() msg from ch: msg from send()</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">  ch := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">string</span>)</span><br><span class="line">  <span class="keyword">go</span> send(ch)</span><br><span class="line">  <span class="keyword">go</span> recv(ch)</span><br><span class="line">  time.Sleep(<span class="number">100</span> * time.Millisecond)</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<p>ä»£ç ä¸­çš„ <code>close(ch)</code> ç”¨äºåœ¨å‘é€å®Œæˆåå…³é—­é€šé“ï¼Œå…³é—­åæ— æ³•å†å‘é€šé“å‘é€æ•°æ®ï¼Œä½†æ˜¯å¯ä»¥ä»é€šé“ä¸­æ¥æ”¶æ•°æ®ç›´åˆ°é€šé“ä¸ºç©ºï¼Œç»§ç»­æ¥æ”¶ç©ºé€šé“ä¸­çš„æ•°æ®ä¼šå¾—åˆ°ç©ºå€¼ã€‚</p>
<h4 id="å¼‚æ­¥-Channel"><a href="#å¼‚æ­¥-Channel" class="headerlink" title="å¼‚æ­¥ Channel"></a>å¼‚æ­¥ Channel</h4><p>ä¸ºäº†ä½¿é€šé“å¯ä»¥å¼‚æ­¥æ¥æ”¶ä¸å‘é€æ•°æ®ï¼Œå¯ä»¥åœ¨å£°æ˜é€šé“æ—¶ä¸ºé€šé“åˆ†é…ä¸€å—ç¼“å†²åŒºï¼Œå¦‚ä¸‹ã€‚</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ch := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>, <span class="number">10</span>)</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„ä»£ç ä¸º <code>int</code> å‹é€šé“åˆ†é…äº† 10 å—ç¼“å†²åŒºã€‚è¿™ç§æ–¹æ³•å¹¶éå®Œå…¨ä¸ä¼šé˜»å¡ï¼Œå½“é€šé“å…ƒç´ å¡«æ»¡ç¼“å†²åŒºæ—¶ï¼Œå‘é€šé“ä¸­ä¼ è¾“æ•°æ®ä¹Ÿä¼šé˜»å¡ï¼Œç›´è‡³æœ‰æ•°æ®è¢«å–èµ°ã€‚æœ‰ç¼“å†²åŒºçš„å¼‚æ­¥é€šé“å¯ä»¥ä½¿ç”¨ <code>len()</code> è·å–å½“å‰é€šé“ä¸­æ•°æ®æ•°é‡ï¼Œä½¿ç”¨ <code>cap()</code> è·å–ç¼“å†²åŒºå®¹é‡ã€‚</p>
<p>å¼‚æ­¥é€šé“çš„ä½¿ç”¨ç¤ºä¾‹å¦‚ä¸‹ã€‚</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">get</span><span class="params">(out <span class="keyword">chan</span> <span class="type">int</span>)</span></span> {</span><br><span class="line">  <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">5</span>; i++ {</span><br><span class="line">    out &lt;- i</span><br><span class="line">  }</span><br><span class="line">  <span class="built_in">close</span>(out)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">add</span><span class="params">(in <span class="keyword">chan</span> <span class="type">int</span>, out <span class="keyword">chan</span> <span class="type">int</span>)</span></span> {</span><br><span class="line">  <span class="keyword">for</span> i, ok := &lt;-in; ok; i, ok = &lt;-in {</span><br><span class="line">    out &lt;- (i + <span class="number">1</span>)</span><br><span class="line">  }</span><br><span class="line">  <span class="built_in">close</span>(out)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">print</span><span class="params">(in <span class="keyword">chan</span> <span class="type">int</span>)</span></span> {</span><br><span class="line">  <span class="keyword">for</span> i := <span class="keyword">range</span> in {</span><br><span class="line">    fmt.Println(i) <span class="comment">// -&gt; 1 2 3 4 5</span></span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">  ch1 := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>, <span class="number">10</span>)</span><br><span class="line">  ch2 := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>, <span class="number">10</span>)</span><br><span class="line">  <span class="keyword">go</span> get(ch1)</span><br><span class="line">  <span class="keyword">go</span> add(ch1, ch2)</span><br><span class="line">  <span class="keyword">go</span> <span class="built_in">print</span>(ch2)</span><br><span class="line">  time.Sleep(<span class="number">100</span> * time.Millisecond)</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„ä»£ç ä¸­ä½¿ç”¨äº†ä¸¤ä¸ªå¼‚æ­¥é€šé“ï¼Œåˆ†åˆ«å®ç° <code>get()</code> åˆ° <code>add()</code> çš„é€šä¿¡å’Œ <code>add()</code> åˆ° <code>print()</code> çš„é€šä¿¡ã€‚<br>è¿™é‡Œè¿˜æ¶‰åŠåˆ°äº†å¯¹ç¼“å†²åŒºçš„éå†ï¼Œå¯ä»¥ä½¿ç”¨ä¸€èˆ¬çš„å¾ªç¯è¯­å¥ <code>for item, ok := &lt;-ch ...</code>ï¼Œæˆ–æ˜¯ä½¿ç”¨ <code>range</code>ã€‚</p>
<h4 id="å•å‘-Channel"><a href="#å•å‘-Channel" class="headerlink" title="å•å‘ Channel"></a>å•å‘ Channel</h4><p>åœ¨å°†é€šé“ä½œä¸ºå‚æ•°ä¼ å…¥å‡½æ•°å‚æ•°æ—¶ï¼Œå¯ä»¥æŒ‡å®šå…¶å¯¹é€šé“æ“ä½œçš„æ–¹å‘ï¼Œä¾‹å¦‚ä¸‹é¢çš„ä¸¤ä¸ªå‡½æ•°ã€‚</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">send</span><span class="params">(out <span class="keyword">chan</span>&lt;- <span class="type">int</span>)</span></span> {</span><br><span class="line">  out &lt;- <span class="number">0</span></span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">recv</span><span class="params">(in &lt;-<span class="keyword">chan</span> <span class="type">int</span>)</span></span> {</span><br><span class="line">  fmt.Println(&lt;-in)</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h4 id="Select"><a href="#Select" class="headerlink" title="Select"></a>Select</h4><p>æœ‰æ—¶ï¼Œæˆ‘ä»¬åœ¨ä¸€ä¸ªå‡½æ•°ä¸­éœ€è¦ä½¿ç”¨åˆ°å¤šä¸ªé€šé“ï¼Œå¹¶ä»ä¸­æ¥æ”¶æ•°æ®ï¼Œæ¯”è¾ƒæœ´ç´ çš„åšæ³•æ˜¯å¾ªç¯æ¥æ”¶å¹¶åˆ¤æ–­å“ªä¸ªé€šé“é‡Œå­˜åœ¨æ•°æ®ï¼Œç¤ºä¾‹å¦‚ä¸‹ã€‚</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">recv</span><span class="params">(ch1 <span class="keyword">chan</span> <span class="type">int</span>, ch2 <span class="keyword">chan</span> in)</span></span> {</span><br><span class="line">  <span class="keyword">for</span> {</span><br><span class="line">    i, ok := &lt;-ch1</span><br><span class="line">    <span class="keyword">if</span> ok {</span><br><span class="line">      <span class="comment">// do something with i from ch1</span></span><br><span class="line">    }</span><br><span class="line">    i, ok = &lt;-ch2</span><br><span class="line">    <span class="keyword">if</span> ok {</span><br><span class="line">      <span class="comment">// do something with i from ch2</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<p>è¿™ç§åšæ³•çš„æ€§èƒ½è¾ƒå·®ï¼ŒGo ä¸­æä¾›äº† <code>select</code> ç›¸åº”å¤šä¸ªé€šé“çš„é€šä¿¡ï¼Œä½¿ç”¨æ–¹å¼ç±»ä¼¼äº <code>switch</code>ï¼Œæ¯ä¸ª <code>case</code> å¯¹åº”åˆ°ä¸€ä¸ªé€šé“çš„æ•°æ®ä¼ é€æˆ–æ˜¯æ¥æ”¶æ“ä½œï¼Œç¤ºä¾‹å¦‚ä¸‹ã€‚</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> {</span><br><span class="line"><span class="keyword">case</span> t := &lt;-ch1:</span><br><span class="line">  <span class="comment">// ch1 æœ‰æ•°æ®æ¥æ”¶è‡³ t æ—¶ï¼Œæ“ä½œ...</span></span><br><span class="line"><span class="keyword">case</span> ch2 &lt;- <span class="number">1</span>:</span><br><span class="line">  <span class="comment">// å¯ä»¥å°† 1 ä¼ é€è‡³ ch2 æ—¶ï¼Œæ“ä½œ...</span></span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">  <span class="comment">// é»˜è®¤æ“ä½œ</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<p><code>select</code> ä¹Ÿå’Œ <code>switch</code> ä¸€æ ·ï¼Œä¸€ä¸ª <code>case</code> æ‰§è¡Œå®Œä¹‹åè‡ªåŠ¨ <code>break</code>ã€‚å› æ­¤ï¼Œè¦ä½¿ç”¨ <code>select</code> å®ç°ä¸Šé¢çš„å¤šé€šé“æ¥æ”¶æ•°æ®çš„ <code>recv()</code> å‡½æ•°ï¼Œè¿˜æ˜¯è¦ä½¿ç”¨å¾ªç¯ã€‚</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">recv</span><span class="params">(ch1 <span class="keyword">chan</span> <span class="type">int</span>, ch2 <span class="keyword">chan</span> in)</span></span> {</span><br><span class="line">  <span class="keyword">for</span> {</span><br><span class="line">    <span class="keyword">select</span> {</span><br><span class="line">    <span class="keyword">case</span> t := &lt;-ch1:</span><br><span class="line">      <span class="comment">// do something with t from ch1</span></span><br><span class="line">    <span class="keyword">case</span> t := &lt;-ch2:</span><br><span class="line">      <span class="comment">// do something with t from ch2</span></span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="comment">// do something</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></table></figure></div>
    </div>

    <div class="post-meta">
        <i>
        
            <span>2025-02-26</span>
            
                <span>è¯¥ç¯‡æ–‡ç« è¢« Casey</span>
            
            
                <span>æ‰“ä¸Šæ ‡ç­¾:
                    
                    
                        <a href='/tags/Go/'>
                            Go
                        </a>
                    
                </span>
             
             
                <span>å½’ä¸ºåˆ†ç±»:
                    
                    
                        <a href='/categories/%E5%AD%A6%E4%B9%A0/'>
                            å­¦ä¹ 
                        </a>
                    
                </span>
            
        
        </i>
    </div>
    <br>
    
    
        
            
    
            <div class="post-footer-pre-next">
                
                    <span>ä¸Šä¸€ç¯‡ï¼š<a href='/2025/02/27/20250227-Gopackage-fmt/'>Go package: fmt</a></span>
                

                
                    <span class="post-footer-pre-next-last-span-right">ä¸‹ä¸€ç¯‡ï¼š<a href="/2025/02/24/20250224-Go%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/">Go å¿«é€Ÿå…¥é—¨ï¼ˆå››ï¼‰</a>
                    </span>
                
            </div>
    
        
    

    
        

     
</div>



                                      
                    
                    
                    <div class="footer">
    
        <span> 
            Â© 2025 Casey 

            
                

            
                
                    / <a href="/contact/"> ğŸ“§è”ç³» </a>
                

            
                
                    / <a href="/support/"> â˜•æ”¯æŒ </a>
                

            
                
                    / <a href="/friends/"> ğŸ”—é“¾æ¥ </a>
                

            
        </span>
       
    
</div>



<!--è¿™æ˜¯æŒ‡ä¸€æ¡çº¿å¾€ä¸‹çš„å†…å®¹-->
<div class="footer-last">
    
            <span>è„šè¸å®åœ°, ä¸æ–­è¿½é€</span>
            
                <span class="footer-last-span-right"><i>æœ¬ç«™ç”±<a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/index.html">Hexo</a>é©±åŠ¨ï½œä½¿ç”¨<a target="_blank" rel="noopener" href="https://github.com/HiNinoJay/hexo-theme-A4">Hexo-theme-A4</a>ä¸»é¢˜</i></span>
            
    
</div>


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>

    <!--ç›®å½•-->
    
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript" ></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js" type="text/javascript" ></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.tocify/1.9.0/javascripts/jquery.tocify.min.js" type="text/javascript" ></script>
        
<script src="/js/toc.js"></script>

    

    
<script src="/js/randomHeaderContent.js"></script>

    <!--å›åˆ°é¡¶éƒ¨æŒ‰é’®-->
    
        
<script src="/js/returnToTop.js"></script>

    

    
        
<script src="/js/returnToLastPage.js"></script>

    





<script src="/js/lightgallery/lightgallery.umd.min.js"></script>



<script src="/js/lightgallery/plugins/lg-thumbnail.umd.min.js"></script>



<script src="/js/lightgallery/plugins/lg-fullscreen.umd.min.js"></script>


<script src="/js/lightgallery/plugins/lg-autoplay.umd.min.js"></script>


<script src="/js/lightgallery/plugins/lg-zoom.umd.min.js"></script>


<script src="/js/lightgallery/plugins/lg-rotate.umd.min.js"></script>


<script src="/js/lightgallery/plugins/lg-paper.umd.min.js"></script>




<script type="text/javascript">
     
    if (typeof lightGallery !== "undefined") {
        var options1 = {
            selector: '.gallery-item',
            plugins: [lgThumbnail, lgFullscreen, lgAutoplay, lgZoom, lgRotate, lgPager], // å¯ç”¨æ’ä»¶
            thumbnail: true,          // æ˜¾ç¤ºç¼©ç•¥å›¾
            zoom: true,               // å¯ç”¨ç¼©æ”¾åŠŸ
            rotate: true,             // å¯ç”¨æ—‹è½¬åŠŸèƒ½èƒ½
            autoplay: true,        // å¯ç”¨è‡ªåŠ¨æ’­æ”¾åŠŸèƒ½
            fullScreen: true,      // å¯ç”¨å…¨å±åŠŸèƒ½
            pager: false, //é¡µç ,
            zoomFromOrigin: true,   // ä»åŸå§‹ä½ç½®ç¼©æ”¾
            actualSize: true,       // å¯ç”¨æŸ¥çœ‹å®é™…å¤§å°çš„åŠŸèƒ½
            enableZoomAfter: 300,    // å»¶è¿Ÿç¼©æ”¾ï¼Œç¡®ä¿å›¾ç‰‡åŠ è½½å®Œæˆåå¯ç¼©æ”¾
        };
        lightGallery(document.getElementsByClassName('.article-gallery')[0], options1); // ä¿®å¤é€‰æ‹©å™¨
    }
    
</script>


    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script> 

                </div>
            
            
                <!-- å›åˆ°é¡¶éƒ¨çš„æŒ‰é’®-->  
                <div class="progress-wrap shadow-drop-2-bottom">
                    <svg class="progress-circle svg-content" width="100%" height="100%" viewBox="-1 -1 102 102">
                        <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98"/>
                    </svg>
                </div>
            
            
                <!-- è¿”å›çš„æŒ‰é’®-->  
                <div class="return-to-last-progress-wrap shadow-drop-2-bottom">
                    <svg class="progress-circle svg-content" width="100%" height="100%" viewBox="-1 -1 102 102">
                        <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98"/>
                    </svg>
                </div>
            
    </body>
</html>